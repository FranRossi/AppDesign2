(self.webpackChunkBugSummaryFrontend=self.webpackChunkBugSummaryFrontend||[]).push([[239],{3239:function(e,t,i){"use strict";i.d(t,{d:function(){return y}});var n=i(390),o=i(9167),r=i(3058),g=i(9821),d=i(9944),a=i(3820),s=i(738),c=i(2693),u=i(2801),l=i(1116),Z=i(6728),p=["f"];function m(e,t){1&e&&(a.TgZ(0,"option",38),a._uU(1,"State: Active"),a.qZA())}function v(e,t){1&e&&(a.TgZ(0,"option",38),a._uU(1,"State: Fixed"),a.qZA())}function f(e,t){if(1&e&&(a.TgZ(0,"option",32),a._uU(1),a.qZA()),2&e){var i=t.$implicit;a.Q6J("ngValue",i.id),a.xp6(1),a.Oqu(i.name)}}function b(e,t){1&e&&(a.TgZ(0,"span",47),a._uU(1,"User has no projects assigned!"),a.qZA())}function h(e,t){1&e&&(a.TgZ(0,"span",47),a._uU(1,"Please select a project!"),a.qZA())}function T(e,t){if(1&e&&(a.TgZ(0,"div",20),a.TgZ(1,"div",21),a.TgZ(2,"div",22),a.TgZ(3,"span",23),a._UZ(4,"i",48),a.qZA(),a.qZA(),a._UZ(5,"input",49),a.qZA(),a.qZA()),2&e){var i=a.oxw(2);a.xp6(5),a.MGl("value"," Fixer: ",i.bug.fixerName,""),a.Q6J("readOnly",!0)}}function A(e,t){if(1&e){var i=a.EpF();a.TgZ(0,"div",50),a.TgZ(1,"div",51),a.TgZ(2,"h6",52),a._uU(3,"Your attention is required"),a.qZA(),a.TgZ(4,"button",53),a.NdJ("click",function(){return(0,a.CHM(i).dismiss)("Cross click")}),a.TgZ(5,"span",54),a._uU(6,"\xd7"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(7,"div",55),a.TgZ(8,"div",56),a._UZ(9,"i",57),a.TgZ(10,"h4",58),a._uU(11,"You should read this!"),a.qZA(),a.TgZ(12,"p"),a._uU(13,"You are about to delete a bug permanently, please confirm this action"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(14,"div",59),a.TgZ(15,"button",60),a.NdJ("click",function(){a.CHM(i);var e=a.oxw(2);return e.onDeleteBug(e.bug.id)}),a._uU(16,"Ok, delete it"),a.qZA(),a.TgZ(17,"button",61),a.NdJ("click",function(){return(0,a.CHM(i).close)("Close click")}),a._uU(18,"Close"),a.qZA(),a.qZA(),a.qZA()}}function q(e,t){if(1&e){var i=a.EpF();a.TgZ(0,"form",18,19),a.NdJ("ngSubmit",function(){return a.CHM(i),a.oxw().onEditBug()}),a.TgZ(2,"div",20),a.TgZ(3,"div",21),a.TgZ(4,"div",22),a.TgZ(5,"span",23),a._UZ(6,"i",24),a.qZA(),a.qZA(),a._UZ(7,"input",25),a.qZA(),a.qZA(),a.TgZ(8,"div",20),a.TgZ(9,"div",21),a.TgZ(10,"div",22),a.TgZ(11,"span",23),a._UZ(12,"i",26),a.qZA(),a.qZA(),a._UZ(13,"input",27),a.qZA(),a.qZA(),a.TgZ(14,"div",28),a.TgZ(15,"div",21),a.TgZ(16,"select",29,30),a.YNc(18,m,2,0,"option",31),a.YNc(19,v,2,0,"option",31),a.TgZ(20,"option",32),a._uU(21,"Active"),a.qZA(),a.TgZ(22,"option",32),a._uU(23,"Fixed"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(24,"div",20),a.TgZ(25,"div",21),a.TgZ(26,"div",22),a.TgZ(27,"span",23),a._UZ(28,"i",33),a.qZA(),a.qZA(),a._UZ(29,"input",34),a.qZA(),a.qZA(),a.TgZ(30,"div",20),a.TgZ(31,"div",21),a.TgZ(32,"div",22),a.TgZ(33,"span",23),a._UZ(34,"i",35),a.qZA(),a.qZA(),a._UZ(35,"input",36),a.qZA(),a.qZA(),a.TgZ(36,"div",28),a.TgZ(37,"div",21),a.TgZ(38,"select",37,30),a.TgZ(40,"option",38),a._uU(41),a.qZA(),a.YNc(42,f,2,2,"option",39),a.qZA(),a.qZA(),a.YNc(43,b,2,0,"span",40),a.YNc(44,h,2,0,"span",40),a.qZA(),a.YNc(45,T,6,2,"div",41),a.TgZ(46,"div",3),a.TgZ(47,"div",42),a.TgZ(48,"div",16),a.TgZ(49,"button",43),a._uU(50," Update bug "),a.qZA(),a.qZA(),a.qZA(),a.TgZ(51,"div",42),a.TgZ(52,"div",16),a.TgZ(53,"a",44),a.NdJ("click",function(){a.CHM(i);var e=a.MAs(57);return a.oxw().open(e,"Notification","")}),a._uU(54," Delete bug "),a.TgZ(55,"div",45),a.YNc(56,A,19,0,"ng-template",null,46,a.W1O),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA()}if(2&e){var n=a.MAs(1),o=a.MAs(17),r=a.oxw();a.xp6(7),a.MGl("placeholder","Name: ",r.bug.name,""),a.xp6(6),a.MGl("placeholder"," Description: ",r.bug.description,""),a.xp6(5),a.Q6J("ngIf",2==r.bug.state),a.xp6(1),a.Q6J("ngIf",1==r.bug.state),a.xp6(1),a.Q6J("ngValue",2),a.xp6(2),a.Q6J("ngValue",1),a.xp6(7),a.MGl("placeholder","Version: ",r.bug.version,""),a.xp6(6),a.MGl("placeholder","FixingTime: ",r.bug.fixingTime,""),a.xp6(6),a.hij("Project: ",r.selectedProjectName,""),a.xp6(1),a.Q6J("ngForOf",r.loadedProjects),a.xp6(1),a.Q6J("ngIf",0==r.loadedProjects.length&&!r.isFetching),a.xp6(1),a.Q6J("ngIf",r.loadedProjects.length>0&&!o.valid&&o.touched),a.xp6(1),a.Q6J("ngIf",""!=r.bug.fixerName),a.xp6(4),a.Q6J("disabled",!n.valid&&!r.error),a.xp6(4),a.Q6J("disabled",!n.valid&&!r.error)}}function x(e,t){if(1&e&&(a.TgZ(0,"div",62),a._uU(1),a.qZA()),2&e){var i=a.oxw();a.xp6(1),a.hij(" ",i.error," ")}}var y=function(){function e(e,t,i,n,o,r,g,d){this.router=e,this.http=t,this.editService=i,this.bugService=n,this.route=o,this.modalService=r,this.userService=g,this.bugDeleteService=d,this.error=null,this.bug=null,this.isFetching=!1,this.loadedProjects=[],this.selectedProjectName=null}return e.prototype.ngOnInit=function(){var e=this;this.route.params.subscribe(function(t){return e.bugId=t.id}),this.getBugById()},e.prototype.getBugById=function(){var e=this;this.isFetching=!0,this.bugService.getBugById(this.bugId).subscribe({next:function(t){e.bug=t,e.getProjects()},error:function(t){e.error=g.q.onHandleError(t)},complete:function(){e.isFetching=!1}})},e.prototype.onDeleteBug=function(e){var t=this;this.modalService.dismissAll(),this.bugDeleteService.deleteBug(e).subscribe({next:function(){t.error=null,t.modalService.dismissAll(),t.router.navigate(["../.."],{relativeTo:t.route})},error:function(e){t.error=g.q.onHandleError(e)}})},e.prototype.getProjects=function(){var e=this;this.isFetching=!0,this.userService.getUserProjects().subscribe({next:function(t){e.loadedProjects=t},error:function(t){e.error=g.q.onHandleError(t)},complete:function(){e.isFetching=!1,e.getSelectedProjectName()}})},e.prototype.getSelectedProjectName=function(){var e=this;this.loadedProjects.forEach(function(t){t.id===e.bug.projectId&&(e.selectedProjectName=t.name)})},e.prototype.onEditBug=function(){var e=this,t=this.editBugForm.value;t=this.updateBugFromForm(t),this.bugService.editBug(t,this.bug.id.toString()).subscribe({next:function(i){e.bug=t,e.editBugForm.resetForm(),e.router.navigate(["../.."],{relativeTo:e.route})},error:function(t){e.error=g.q.onHandleError(t)}})},e.prototype.open=function(e,t,i){this.modalService.open(e,"Notification"===t?{windowClass:"modal-danger",centered:!0}:{centered:!0})},e.prototype.updateBugFromForm=function(e){return e.id=this.bug.id,e.name=""===e.name?this.bug.name:e.name,e.projectId=""===e.projectId.toString()?this.bug.projectId:e.projectId,e.version=""===e.version?this.bug.version:e.version,e.state=""===e.state.toString()?this.bug.state:e.state,e.fixingTime=""===e.fixingTime.toString()?this.bug.fixingTime:e.fixingTime,e.description=""===e.description?this.bug.description:e.description,e},e.\u0275fac=function(t){return new(t||e)(a.Y36(s.F0),a.Y36(c.eN),a.Y36(r.E),a.Y36(n.L),a.Y36(s.gz),a.Y36(u.FF),a.Y36(o.f),a.Y36(d.H))},e.\u0275cmp=a.Xpm({type:e,selectors:[["app-bug"]],viewQuery:function(e,t){var i;1&e&&a.Gf(p,5),2&e&&a.iGM(i=a.CRH())&&(t.editBugForm=i.first)},decls:23,vars:2,consts:[[1,"header","bg-gradient-danger","py-7","py-lg-8"],[1,"container"],[1,"header-body","text-center","mb-7"],[1,"row","justify-content-center"],[1,"col-lg-5","col-md-6"],[1,"text-white"],[1,"text-lead","text-light"],[1,"separator","separator-bottom","separator-skew","zindex-100"],["x","0","y","0","viewBox","0 0 2560 100","preserveAspectRatio","none","xmlns","http://www.w3.org/2000/svg"],["points","2560 0 2560 100 0 100",1,"fill-default"],[1,"container","mt--8","pb-5"],[1,"col-lg-6","col-md-8"],[1,"card","bg-secondary","shadow","border-0"],[1,"card-body","px-lg-5","py-lg-5"],[1,"text-center","text-muted","mb-4"],[3,"ngSubmit",4,"ngIf"],[1,"text-center"],["class","alert alert-danger","role","alert",4,"ngIf"],[3,"ngSubmit"],["f","ngForm"],[1,"form-group","mb-3"],[1,"input-group","input-group-alternative"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"ni","ni-hat-3"],["type","text","ngModel","","name","name",1,"form-control",3,"placeholder"],[1,"ni","ni-align-center"],["type","text","ngModel","","name","description",1,"form-control",3,"placeholder"],[1,"form-group"],["data-style","btn btn-link","ngModel","","name","state","type","number",1,"form-control","selectpicker"],["state","ngModel"],["value","","disabled","","selected","","hidden","",4,"ngIf"],[3,"ngValue"],[1,"ni","ni-archive-2"],["type","text","ngModel","","name","version",1,"form-control",3,"placeholder"],[1,"fas","fa-clock"],["type","number","ngModel","","name","fixingTime",1,"form-control",3,"placeholder"],["data-style","btn btn-link","ngModel","","name","projectId","type","number",1,"form-control","selectpicker"],["value","","disabled","","selected","","hidden",""],[3,"ngValue",4,"ngFor","ngForOf"],["class","text-sm",4,"ngIf"],["class","form-group mb-3",4,"ngIf"],[1,"col"],["type","submit",1,"btn","btn-primary","my-4",3,"disabled"],[1,"btn","btn-danger","my-4",3,"disabled","click"],[1,"col-md-4"],["deleteBug",""],[1,"text-sm"],[1,"ni","ni-settings"],["name","fixerName","type","text",1,"form-control",3,"readOnly","value"],[1,"modal-content","bg-gradient-danger"],[1,"modal-header"],[1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"py-3","text-center"],[1,"ni","ni-bell-55","ni-3x"],[1,"heading","mt-4"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-white",3,"click"],["type","button","data-dismiss","modal",1,"btn","btn-link","text-white","ml-auto",3,"click"],["role","alert",1,"alert","alert-danger"]],template:function(e,t){1&e&&(a.TgZ(0,"div",0),a.TgZ(1,"div",1),a.TgZ(2,"div",2),a.TgZ(3,"div",3),a.TgZ(4,"div",4),a.TgZ(5,"h1",5),a._uU(6,"Welcome!"),a.qZA(),a.TgZ(7,"p",6),a._uU(8,"Use these forms to update this bug"),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.TgZ(9,"div",7),a.O4$(),a.TgZ(10,"svg",8),a._UZ(11,"polygon",9),a.qZA(),a.qZA(),a.qZA(),a.kcU(),a.TgZ(12,"div",10),a.TgZ(13,"div",3),a.TgZ(14,"div",11),a.TgZ(15,"div",12),a.TgZ(16,"div",13),a.TgZ(17,"div",14),a.TgZ(18,"small"),a._uU(19,"Update bug's information"),a.qZA(),a.qZA(),a.YNc(20,q,58,15,"form",15),a.TgZ(21,"div",16),a.YNc(22,x,2,1,"div",17),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA()),2&e&&(a.xp6(20),a.Q6J("ngIf",!t.isFetching&&!t.error),a.xp6(2),a.Q6J("ngIf",t.error))},directives:[l.O5,Z._Y,Z.JL,Z.F,Z.Fj,Z.JJ,Z.On,Z.EJ,Z.YN,Z.Kr,Z.wV,l.sg],styles:[""]}),e}()}}]);